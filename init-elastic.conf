#!/bin/bash

input {
    file {
        path => "./csv/US_Accidents_Dec19.csv",
        start_position => beginning
    }
}

filter {
    csv {
        columns => ["id","source","tmc","severity","start_time","end_time","start_lat","start_lng","end_lat","end_lng","distance_mi","description","number","street","side","city","county","state","zipcode","country","timezone","airport_code","weather_timestamp","temperature_f","wind_chill_f","humidity","pressure_in","visibility_mi","wind_direction","wind_speed_mph","precipitation_in","weather_condition","amenity","bump","crossing","give_way","junction","no_exit","railway","roundabout","station","stop","traffic_calming","traffic_signal","turning_loop","sunrise_sunset","civil_twilight","nautical_twilight","astronomical_twilight"]
        mutate {
            #add_field => { #Por si luego es necesario generar una columna coordenadas
            #    "location" => "%{column7}","%{column8}"
            #}
            remove_field => ["message","@version","@timestamp","host","path"]
        }
    }
}

output {
    stdout { }
    elasticsearch {
        index => "accidents"
    }
}